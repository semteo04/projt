<!doctype html>
<html>
<head>
	<meta charset="euc-kr"/>
	<title>tetris</title>
	<style>
		.red{
			background-color: red;
		}
		.blue{
			background-color: blue;
		}
		#board {
			border: 1px solid black;
			position: fixed;
			top: 100px;
			left: 150px;
		}
		#board tr td {
			border: 1px solid white;
			width: 20px;
			height: 20px;
		}
		#mi tr td{
			border: 1px solid white;
			width: 20px;
			height: 20px;
		}
		#mi{
			border: 1px solid black;
			position: fixed;
			top: 100px;
			left: 30px;
		}
	</style>
	<script>
		var xx=0,t=0,st=[],d=Math.floor(Math.random()*7);
		function ss(){
			var i,j;
			for(i=0;i<4;i++){
				for(j=0;j<4;j++){
					if(st[d][i][j]!=0){
						var xii="m"+(i*10+j);
						if(st[d][i][j]==1) document.getElementById(xii).className="red";
					}
				}
			}
		}
		function init(){
			var i,j,k;
			for(i=0;i<7;i++){
				st.push([]);
				for(j=0;j<4;j++){
					st[i].push([]);
					for(k=0;k<4;k++){
						st[i][j].push(0);
					}
				}
			}
			st[0][1][0]=1;
			st[0][1][1]=1;
			st[0][1][2]=1;
			st[0][1][3]=1;
			st[1][2][0]=2;
			st[1][2][1]=2;
			st[1][2][2]=2;
			st[1][1][1]=2;
			st[2][0][1]=3;
			st[2][1][1]=3;
			st[2][2][1]=3;
			st[2][2][2]=3;
			st[3][0][2]=4;
			st[3][1][2]=4;
			st[3][2][2]=4;
			st[3][2][1]=4;
			st[4][1][1]=5;
			st[4][1][2]=5;
			st[4][2][1]=5;
			st[4][2][2]=5;
			st[5][2][0]=6;
			st[5][2][1]=6;
			st[5][1][1]=6;
			st[5][1][2]=6;
			st[6][1][0]=7;
			st[6][1][1]=7;
			st[6][2][1]=7;
			st[6][2][2]=7;
			ss();
		}
		function down(){
			t++;
			if(t-xx>=30){
				xx=t;
			}
			window.requestAnimationFrame(down);
		}
	</script>
</head>
<body>
	<table id="board" cellspacing="0">
	</table>
	<table id="mi" cellspacing="0">
	</table>
</body>
<script>
	var i,j,x="";
	for(i=0;i<20;i++){
		x=x+"<tr>";
		for(j=0;j<10;j++){
			x=x+"<td></td>";
		}
		x=x+"</tr>";
	}
	document.getElementById("board").innerHTML=x;
	x="";
	for(i=0;i<4;i++){
		x=x+"<tr>";
		for(j=0;j<4;j++){
			x=x+'<td id="m'+(i*10+j)+'"></td>';
		}
		x=x+"</tr>";
	}
	document.getElementById("mi").innerHTML=x;
	init();
	down();
</script>
</html>
